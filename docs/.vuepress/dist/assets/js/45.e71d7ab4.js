(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{252:function(s,a,r){"use strict";r.r(a);var e=r(0),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,r=s._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h1",{attrs:{id:"没有公共ip却想使用远程计算机怎么办"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#没有公共ip却想使用远程计算机怎么办"}},[s._v("#")]),s._v(" 没有公共IP却想使用远程计算机怎么办?")]),s._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v("frp 实现内网穿透\nnatfrp.org 提供免费的 frp server 服务\n在 frp 中设置使用 XTCP 协议可以建立 p2p 连接，数据不走 server\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("h2",{attrs:{id:"工具"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#工具"}},[s._v("#")]),s._v(" 工具")]),s._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/fatedier/frp",target:"_blank",rel:"noopener noreferrer"}},[s._v("FRP"),r("OutboundLink")],1),s._v("的全称Fast Reverse Proxy。可以从"),r("a",{attrs:{href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),r("OutboundLink")],1),s._v("下载。\n下载好的文件，解压后是这个样。")]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n├── frpc\n├── frpc_full.ini\n├── frpc.ini\n├── frps\n├── frps_full.ini\n├── frps.ini\n├── LICENSE\n└── systemd\n    ├── frpc.service\n    ├── frpc@.service\n    ├── frps.service\n    └── frps@.service\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br")])]),r("p",[s._v("文件含有"),r("code",[s._v("c")]),s._v("字符的代表是"),r("code",[s._v("client")]),s._v("客户端程序;含有"),r("code",[s._v("s")]),s._v("字符的代表是"),r("code",[s._v("server")]),s._v("服务器程序。\n也就是我们还需要一个服务器。")]),s._v(" "),r("h2",{attrs:{id:"服务器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#服务器"}},[s._v("#")]),s._v(" 服务器")]),s._v(" "),r("p",[s._v("接下来我们到 "),r("a",{attrs:{href:"natfrp.org"}},[s._v("natfrp.org")]),s._v(" 得到一个免费的frp server。很遗憾，这个网站已经不行了。")]),s._v(" "),r("p",[s._v("看来天下真的没有免费的午餐啊。于是乎我在"),r("a",{attrs:{href:"www.vultr.com"}},[s._v("vultr")]),s._v("买了一个东京的服务器。\n试了7,8个服务器，ssh都连不过去。貌似是这些IP都已经被墙了。\n貌似还有一个搬瓦工的账户，我再试一下这个。这下可以了。")]),s._v(" "),r("p",[s._v("公共IP的服务器(Server):放"),r("code",[s._v("frps")]),s._v("，"),r("code",[s._v("frps.ini")]),s._v("两个文件\n想要访问的内网机器(Target): 放"),r("code",[s._v("frpc")]),s._v(","),r("code",[s._v("frpc.ini")]),s._v("两个文件")]),s._v(" "),r("p",[s._v("在任意一个地方的电脑(User)")]),s._v(" "),r("h2",{attrs:{id:"设置协议"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#设置协议"}},[s._v("#")]),s._v(" 设置协议")]),s._v(" "),r("h3",{attrs:{id:"server的配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#server的配置"}},[s._v("#")]),s._v(" Server的配置")]),s._v(" "),r("p",[s._v("在Server的"),r("code",[s._v("frps.ini")]),s._v("中填写:")]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frps.ini")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nbind_port "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("p",[s._v("然后在Server上执行:")]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[s._v("./frps -c ./frps.ini\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("若没有出现问题，Ctrl+C中断程序。然后使用使用下面的命令使其后台运行。")]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./frps -c ./frps.ini "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("退出服务器。")]),s._v(" "),r("h3",{attrs:{id:"内网机器-target的配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内网机器-target的配置"}},[s._v("#")]),s._v(" 内网机器(Target的配置)")]),s._v(" "),r("p",[s._v("在Target的"),r("code",[s._v("frpc.ini")]),s._v("中填写，其中"),r("code",[s._v("xxx.xxx.xxx.xxx")]),s._v("是你的服务器的IP地址。")]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("common"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver_addr "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" xxx.xxx.xxx.xxx\nserver_port "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("\nhttp_proxy "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ssh"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tcp\nlocal_ip "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\nlocal_port "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\nremote_port "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br")])]),r("p",[s._v("同样现在内网机器Target上执行")]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[s._v("./frpc -c ./frpc.ini\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("用来连接你的frp服务器。\n若没有出现问题，那么就可以使用下面的命令使其后台运行")]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./frpc -c ./frpc.ini "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("h3",{attrs:{id:"在任意一台电脑上的操作"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#在任意一台电脑上的操作"}},[s._v("#")]),s._v(" 在任意一台电脑上的操作")]),s._v(" "),r("p",[s._v("配置好Server和Target上的frp程序后，我们可以使用下面的命令在任意一台电脑上连接你的内网机器了。\n假设你的内网电脑上的用户是"),r("code",[s._v("jack")]),s._v(",那么对应的命令就是:")]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -p "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v(" jack@xxx.xxx.xxx.xxx\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("当然为了操作简单，我们这里没有使用P2P的技术。\n暂时就先这样，以后有需要了再说。")]),s._v(" "),r("Livere")],1)}),[],!1,null,null,null);a.default=t.exports}}]);